:github_url: hide

.. Generated automatically by doc/tools/make_rst.py in GaaeExplorer's source tree.
.. DO NOT EDIT THIS FILE, but the StreamPeer.xml source instead.
.. The source is found in doc/classes or modules/<name>/doc_classes.

.. _class_StreamPeer:

StreamPeer
==========

**Inherits:** :ref:`Reference<class_Reference>` **<** :ref:`Object<class_Object>`

**Inherited By:** :ref:`StreamPeerBuffer<class_StreamPeerBuffer>`, :ref:`StreamPeerGDNative<class_StreamPeerGDNative>`, :ref:`StreamPeerSSL<class_StreamPeerSSL>`, :ref:`StreamPeerTCP<class_StreamPeerTCP>`

基于流的协议的抽象和基类。

描述
----

StreamPeer 是对流式协议（如 TCP）的抽象和基类。它提供了用于通过流发送和接收原始数据或字符串的数据的 API。

属性
----

+-------------------------+---------------------------------------------------------+-----------+
| :ref:`bool<class_bool>` | :ref:`big_endian<class_StreamPeer_property_big_endian>` | ``false`` |
+-------------------------+---------------------------------------------------------+-----------+

方法
----

+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                 | :ref:`get_16<class_StreamPeer_method_get_16>` **(** **)**                                                                                   |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                 | :ref:`get_32<class_StreamPeer_method_get_32>` **(** **)**                                                                                   |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                 | :ref:`get_64<class_StreamPeer_method_get_64>` **(** **)**                                                                                   |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                 | :ref:`get_8<class_StreamPeer_method_get_8>` **(** **)**                                                                                     |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                 | :ref:`get_available_bytes<class_StreamPeer_method_get_available_bytes>` **(** **)** |const|                                                 |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Array<class_Array>`             | :ref:`get_data<class_StreamPeer_method_get_data>` **(** :ref:`int<class_int>` bytes **)**                                                   |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`float<class_float>`             | :ref:`get_double<class_StreamPeer_method_get_double>` **(** **)**                                                                           |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`float<class_float>`             | :ref:`get_float<class_StreamPeer_method_get_float>` **(** **)**                                                                             |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Array<class_Array>`             | :ref:`get_partial_data<class_StreamPeer_method_get_partial_data>` **(** :ref:`int<class_int>` bytes **)**                                   |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`           | :ref:`get_string<class_StreamPeer_method_get_string>` **(** :ref:`int<class_int>` bytes=-1 **)**                                            |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                 | :ref:`get_u16<class_StreamPeer_method_get_u16>` **(** **)**                                                                                 |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                 | :ref:`get_u32<class_StreamPeer_method_get_u32>` **(** **)**                                                                                 |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                 | :ref:`get_u64<class_StreamPeer_method_get_u64>` **(** **)**                                                                                 |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                 | :ref:`get_u8<class_StreamPeer_method_get_u8>` **(** **)**                                                                                   |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`           | :ref:`get_utf8_string<class_StreamPeer_method_get_utf8_string>` **(** :ref:`int<class_int>` bytes=-1 **)**                                  |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Variant<class_Variant>`         | :ref:`get_var<class_StreamPeer_method_get_var>` **(** :ref:`bool<class_bool>` allow_objects=false **)**                                     |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| void                                  | :ref:`put_16<class_StreamPeer_method_put_16>` **(** :ref:`int<class_int>` value **)**                                                       |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| void                                  | :ref:`put_32<class_StreamPeer_method_put_32>` **(** :ref:`int<class_int>` value **)**                                                       |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| void                                  | :ref:`put_64<class_StreamPeer_method_put_64>` **(** :ref:`int<class_int>` value **)**                                                       |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| void                                  | :ref:`put_8<class_StreamPeer_method_put_8>` **(** :ref:`int<class_int>` value **)**                                                         |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Error<enum_@GlobalScope_Error>` | :ref:`put_data<class_StreamPeer_method_put_data>` **(** :ref:`PoolByteArray<class_PoolByteArray>` data **)**                                |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| void                                  | :ref:`put_double<class_StreamPeer_method_put_double>` **(** :ref:`float<class_float>` value **)**                                           |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| void                                  | :ref:`put_float<class_StreamPeer_method_put_float>` **(** :ref:`float<class_float>` value **)**                                             |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Array<class_Array>`             | :ref:`put_partial_data<class_StreamPeer_method_put_partial_data>` **(** :ref:`PoolByteArray<class_PoolByteArray>` data **)**                |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| void                                  | :ref:`put_string<class_StreamPeer_method_put_string>` **(** :ref:`String<class_String>` value **)**                                         |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| void                                  | :ref:`put_u16<class_StreamPeer_method_put_u16>` **(** :ref:`int<class_int>` value **)**                                                     |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| void                                  | :ref:`put_u32<class_StreamPeer_method_put_u32>` **(** :ref:`int<class_int>` value **)**                                                     |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| void                                  | :ref:`put_u64<class_StreamPeer_method_put_u64>` **(** :ref:`int<class_int>` value **)**                                                     |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| void                                  | :ref:`put_u8<class_StreamPeer_method_put_u8>` **(** :ref:`int<class_int>` value **)**                                                       |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| void                                  | :ref:`put_utf8_string<class_StreamPeer_method_put_utf8_string>` **(** :ref:`String<class_String>` value **)**                               |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+
| void                                  | :ref:`put_var<class_StreamPeer_method_put_var>` **(** :ref:`Variant<class_Variant>` value, :ref:`bool<class_bool>` full_objects=false **)** |
+---------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+

属性说明
--------

.. _class_StreamPeer_property_big_endian:

- :ref:`bool<class_bool>` **big_endian**

+-----------+-------------------------+
| *Default* | ``false``               |
+-----------+-------------------------+
| *Setter*  | set_big_endian(value)   |
+-----------+-------------------------+
| *Getter*  | is_big_endian_enabled() |
+-----------+-------------------------+

为 ``true`` 时，该 ``StreamPeer`` 进行编解码时会使用大端格式。

方法说明
--------

.. _class_StreamPeer_method_get_16:

- :ref:`int<class_int>` **get_16** **(** **)**

从流中获取一个有符号 16 位值。

----

.. _class_StreamPeer_method_get_32:

- :ref:`int<class_int>` **get_32** **(** **)**

从流中获取一个有符号 32 位值。

----

.. _class_StreamPeer_method_get_64:

- :ref:`int<class_int>` **get_64** **(** **)**

从流中获取一个有符号 64 位值。

----

.. _class_StreamPeer_method_get_8:

- :ref:`int<class_int>` **get_8** **(** **)**

从流中获取一个有符号字节。

----

.. _class_StreamPeer_method_get_available_bytes:

- :ref:`int<class_int>` **get_available_bytes** **(** **)** |const|

返回该 ``StreamPeer`` 可用的字节数。

----

.. _class_StreamPeer_method_get_data:

- :ref:`Array<class_Array>` **get_data** **(** :ref:`int<class_int>` bytes **)**

返回接收到的块数据。可以使用 ``bytes`` 参数设置所需接收的字节数。如果可用的字节数不足，函数会阻塞至接收到所需字节数为止。该函数返回两个值，一个 :ref:`Error<enum_@GlobalScope_Error>` 错误码以及一个数据数组。

----

.. _class_StreamPeer_method_get_double:

- :ref:`float<class_float>` **get_double** **(** **)**

从流中获取一个双精度浮点数。

----

.. _class_StreamPeer_method_get_float:

- :ref:`float<class_float>` **get_float** **(** **)**

从流中获取一个单精度浮点数。

----

.. _class_StreamPeer_method_get_partial_data:

- :ref:`Array<class_Array>` **get_partial_data** **(** :ref:`int<class_int>` bytes **)**

返回接收到的块数据。可以使用“bytes”参数设置所需接收的字节数。如果可用的字节数不足，函数会阻塞至接收到所需字节数为止。该函数返回两个值，一个 :ref:`Error<enum_@GlobalScope_Error>` 错误码以及一个数据数组。

----

.. _class_StreamPeer_method_get_string:

- :ref:`String<class_String>` **get_string** **(** :ref:`int<class_int>` bytes=-1 **)**

从流中获取一个字节长度为 ``bytes`` 的字符串。如果 ``bytes`` 为负（默认），会按照 :ref:`put_string<class_StreamPeer_method_put_string>` 的逆向操作从流中读取长度。

----

.. _class_StreamPeer_method_get_u16:

- :ref:`int<class_int>` **get_u16** **(** **)**

从流中获取一个无符号 16 位值。

----

.. _class_StreamPeer_method_get_u32:

- :ref:`int<class_int>` **get_u32** **(** **)**

从流中获取一个无符号 32 位值。

----

.. _class_StreamPeer_method_get_u64:

- :ref:`int<class_int>` **get_u64** **(** **)**

从流中获取一个无符号 64 位值。

----

.. _class_StreamPeer_method_get_u8:

- :ref:`int<class_int>` **get_u8** **(** **)**

从流中获取一个无符号字节。

----

.. _class_StreamPeer_method_get_utf8_string:

- :ref:`String<class_String>` **get_utf8_string** **(** :ref:`int<class_int>` bytes=-1 **)**

从流中获取一个字节长度为 ``bytes`` 的 UTF-8 字符串（将发送的字符串解码为 UTF-8）。如果 ``bytes`` 为负（默认），会按照 :ref:`put_utf8_string<class_StreamPeer_method_put_utf8_string>` 的逆向操作从流中读取长度。

----

.. _class_StreamPeer_method_get_var:

- :ref:`Variant<class_Variant>` **get_var** **(** :ref:`bool<class_bool>` allow_objects=false **)**

从流中获取一个 Variant。如果 ``allow_object`` 为 ``true``\ ，则会允许解码出对象。

\ **警告：** 反序列化的对象可能包含会被执行的代码。如果序列化的对象来自不可信的来源，请勿使用该选项，以免造成远程代码执行等安全威胁。

----

.. _class_StreamPeer_method_put_16:

- void **put_16** **(** :ref:`int<class_int>` value **)**

向流中放入一个有符号 16 位值。

----

.. _class_StreamPeer_method_put_32:

- void **put_32** **(** :ref:`int<class_int>` value **)**

向流中放入一个有符号 32 位值。

----

.. _class_StreamPeer_method_put_64:

- void **put_64** **(** :ref:`int<class_int>` value **)**

向流中放入一个有符号 64 位值。

----

.. _class_StreamPeer_method_put_8:

- void **put_8** **(** :ref:`int<class_int>` value **)**

向流中放入一个有符号字节。

----

.. _class_StreamPeer_method_put_data:

- :ref:`Error<enum_@GlobalScope_Error>` **put_data** **(** :ref:`PoolByteArray<class_PoolByteArray>` data **)**

通过连接发送块数据，数据完成发送前会阻塞。该函数返回 :ref:`Error<enum_@GlobalScope_Error>` 错误码。

----

.. _class_StreamPeer_method_put_double:

- void **put_double** **(** :ref:`float<class_float>` value **)**

向流中放入一个双精度浮点数。

----

.. _class_StreamPeer_method_put_float:

- void **put_float** **(** :ref:`float<class_float>` value **)**

向流中放入一个单精度浮点数。

----

.. _class_StreamPeer_method_put_partial_data:

- :ref:`Array<class_Array>` **put_partial_data** **(** :ref:`PoolByteArray<class_PoolByteArray>` data **)**

通过连接发送数据。如果数据无法一次性发完，则仅会发送部分数据。该函数返回两个值，一个 :ref:`Error<enum_@GlobalScope_Error>` 错误码以及一个整数，表示实际发送的数据量。

----

.. _class_StreamPeer_method_put_string:

- void **put_string** **(** :ref:`String<class_String>` value **)**

向流中放入一个以零结尾的 ASCII 字符串，前缀一个表示其长度的 32 位无符号整数。

\ **注意：** 如果想发送不包含长度前缀的 ASCII 字符串，可以使用 :ref:`put_data<class_StreamPeer_method_put_data>`\ ：

::

    put_data("Hello world".to_ascii())

----

.. _class_StreamPeer_method_put_u16:

- void **put_u16** **(** :ref:`int<class_int>` value **)**

向流中放入一个无符号 16 位值。

----

.. _class_StreamPeer_method_put_u32:

- void **put_u32** **(** :ref:`int<class_int>` value **)**

向流中放入一个无符号 32 位值。

----

.. _class_StreamPeer_method_put_u64:

- void **put_u64** **(** :ref:`int<class_int>` value **)**

向流中放入一个无符号 64 位值。

----

.. _class_StreamPeer_method_put_u8:

- void **put_u8** **(** :ref:`int<class_int>` value **)**

向流中放入一个无符号字节。

----

.. _class_StreamPeer_method_put_utf8_string:

- void **put_utf8_string** **(** :ref:`String<class_String>` value **)**

向流中放入一个以零结尾的 UTF-8 字符串，前缀一个表示其长度的 32 位无符号整数。

\ **注意：** 如果想发送不包含长度前缀的 UTF-8 字符串，可以使用 :ref:`put_data<class_StreamPeer_method_put_data>`\ ：

::

    put_data("Hello world".to_utf8())

----

.. _class_StreamPeer_method_put_var:

- void **put_var** **(** :ref:`Variant<class_Variant>` value, :ref:`bool<class_bool>` full_objects=false **)**

向流中放入一个 Variant。如果 ``full_objects`` 为 ``true``\ ，则会允许将对象编码（其中可能包含代码）。

.. |virtual| replace:: :abbr:`virtual (This method should typically be overridden by the user to have any effect.)`
.. |const| replace:: :abbr:`const (This method has no side effects. It doesn't modify any of the instance's member variables.)`
.. |vararg| replace:: :abbr:`vararg (This method accepts any number of arguments after the ones described here.)`
