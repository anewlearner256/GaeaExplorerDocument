:github_url: hide

.. Generated automatically by doc/tools/make_rst.py in GaaeExplorer's source tree.
.. DO NOT EDIT THIS FILE, but the AudioStreamPlayer3D.xml source instead.
.. The source is found in doc/classes or modules/<name>/doc_classes.

.. _class_AudioStreamPlayer3D:

AudioStreamPlayer3D
===================

**Inherits:** :ref:`Spatial<class_Spatial>` **<** :ref:`Node<class_Node>` **<** :ref:`Object<class_Object>`

在 3D 空间中播放位置声音。

描述
----

播放具有定向性的声音效果，如果需要，可随着距离的增加而减弱，产生空间中可听到的位置效果。为了更逼真，低通滤波器会自动应用于远处的声音。这可以通过设置\ :ref:`attenuation_filter_cutoff_hz<class_AudioStreamPlayer3D_property_attenuation_filter_cutoff_hz>`\ 为\ ``20500``\ 来禁用。

默认情况下，音频是从相机的位置听到的，这可以通过在场景中添加一个\ :ref:`Listener<class_Listener>`\ 节点，并通过对其调用\ :ref:`Listener.make_current<class_Listener_method_make_current>`\ 来启用它，以改变。

参阅\ :ref:`AudioStreamPlayer<class_AudioStreamPlayer>`\ 来播放非位置的声音。

\ **注意：** 隐藏一个\ ``AudioStreamPlayer3D``\ 节点并不能禁用其音频输出。要暂时禁用\ ``AudioStreamPlayer3D``\ 的音频输出，请将\ :ref:`unit_db<class_AudioStreamPlayer3D_property_unit_db>`\ 设置为一个非常低的值，如\ ``-100``\ （人的听觉听不到）。

教程
----

- :doc:`../tutorials/audio/audio_streams`

属性
----

+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`int<class_int>`                                              | :ref:`area_mask<class_AudioStreamPlayer3D_property_area_mask>`                                                       | ``1``        |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`float<class_float>`                                          | :ref:`attenuation_filter_cutoff_hz<class_AudioStreamPlayer3D_property_attenuation_filter_cutoff_hz>`                 | ``5000.0``   |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`float<class_float>`                                          | :ref:`attenuation_filter_db<class_AudioStreamPlayer3D_property_attenuation_filter_db>`                               | ``-24.0``    |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`AttenuationModel<enum_AudioStreamPlayer3D_AttenuationModel>` | :ref:`attenuation_model<class_AudioStreamPlayer3D_property_attenuation_model>`                                       | ``0``        |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`bool<class_bool>`                                            | :ref:`autoplay<class_AudioStreamPlayer3D_property_autoplay>`                                                         | ``false``    |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`String<class_String>`                                        | :ref:`bus<class_AudioStreamPlayer3D_property_bus>`                                                                   | ``"Master"`` |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`DopplerTracking<enum_AudioStreamPlayer3D_DopplerTracking>`   | :ref:`doppler_tracking<class_AudioStreamPlayer3D_property_doppler_tracking>`                                         | ``0``        |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`float<class_float>`                                          | :ref:`emission_angle_degrees<class_AudioStreamPlayer3D_property_emission_angle_degrees>`                             | ``45.0``     |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`bool<class_bool>`                                            | :ref:`emission_angle_enabled<class_AudioStreamPlayer3D_property_emission_angle_enabled>`                             | ``false``    |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`float<class_float>`                                          | :ref:`emission_angle_filter_attenuation_db<class_AudioStreamPlayer3D_property_emission_angle_filter_attenuation_db>` | ``-12.0``    |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`float<class_float>`                                          | :ref:`max_db<class_AudioStreamPlayer3D_property_max_db>`                                                             | ``3.0``      |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`float<class_float>`                                          | :ref:`max_distance<class_AudioStreamPlayer3D_property_max_distance>`                                                 | ``0.0``      |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`OutOfRangeMode<enum_AudioStreamPlayer3D_OutOfRangeMode>`     | :ref:`out_of_range_mode<class_AudioStreamPlayer3D_property_out_of_range_mode>`                                       | ``0``        |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`float<class_float>`                                          | :ref:`pitch_scale<class_AudioStreamPlayer3D_property_pitch_scale>`                                                   | ``1.0``      |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`bool<class_bool>`                                            | :ref:`playing<class_AudioStreamPlayer3D_property_playing>`                                                           | ``false``    |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`AudioStream<class_AudioStream>`                              | :ref:`stream<class_AudioStreamPlayer3D_property_stream>`                                                             |              |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`bool<class_bool>`                                            | :ref:`stream_paused<class_AudioStreamPlayer3D_property_stream_paused>`                                               | ``false``    |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`float<class_float>`                                          | :ref:`unit_db<class_AudioStreamPlayer3D_property_unit_db>`                                                           | ``0.0``      |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+
| :ref:`float<class_float>`                                          | :ref:`unit_size<class_AudioStreamPlayer3D_property_unit_size>`                                                       | ``1.0``      |
+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------+--------------+

方法
----

+-------------------------------------------------------+------------------------------------------------------------------------------------------------------------+
| :ref:`float<class_float>`                             | :ref:`get_playback_position<class_AudioStreamPlayer3D_method_get_playback_position>` **(** **)**           |
+-------------------------------------------------------+------------------------------------------------------------------------------------------------------------+
| :ref:`AudioStreamPlayback<class_AudioStreamPlayback>` | :ref:`get_stream_playback<class_AudioStreamPlayer3D_method_get_stream_playback>` **(** **)**               |
+-------------------------------------------------------+------------------------------------------------------------------------------------------------------------+
| void                                                  | :ref:`play<class_AudioStreamPlayer3D_method_play>` **(** :ref:`float<class_float>` from_position=0.0 **)** |
+-------------------------------------------------------+------------------------------------------------------------------------------------------------------------+
| void                                                  | :ref:`seek<class_AudioStreamPlayer3D_method_seek>` **(** :ref:`float<class_float>` to_position **)**       |
+-------------------------------------------------------+------------------------------------------------------------------------------------------------------------+
| void                                                  | :ref:`stop<class_AudioStreamPlayer3D_method_stop>` **(** **)**                                             |
+-------------------------------------------------------+------------------------------------------------------------------------------------------------------------+

信号
----

.. _class_AudioStreamPlayer3D_signal_finished:

- **finished** **(** **)**

当音频停止播放时发出。

枚举
----

.. _enum_AudioStreamPlayer3D_AttenuationModel:

.. _class_AudioStreamPlayer3D_constant_ATTENUATION_INVERSE_DISTANCE:

.. _class_AudioStreamPlayer3D_constant_ATTENUATION_INVERSE_SQUARE_DISTANCE:

.. _class_AudioStreamPlayer3D_constant_ATTENUATION_LOGARITHMIC:

.. _class_AudioStreamPlayer3D_constant_ATTENUATION_DISABLED:

enum **AttenuationModel**:

- **ATTENUATION_INVERSE_DISTANCE** = **0** --- 根据距离对响度进行线性衰减。

- **ATTENUATION_INVERSE_SQUARE_DISTANCE** = **1** --- 根据距离对响度进行平方衰减。

- **ATTENUATION_LOGARITHMIC** = **2** --- 根据距离对数降低响度。

- **ATTENUATION_DISABLED** = **3** --- 不会根据距离衰减响度。与 :ref:`AudioStreamPlayer<class_AudioStreamPlayer>` 不同，声音仍会在位置上被听到。 :ref:`ATTENUATION_DISABLED<class_AudioStreamPlayer3D_constant_ATTENUATION_DISABLED>` 可以与大于 ``0.0`` 的 :ref:`max_distance<class_AudioStreamPlayer3D_property_max_distance>` 值结合使用，以实现线性衰减，限制在定义的球体大小。

----

.. _enum_AudioStreamPlayer3D_OutOfRangeMode:

.. _class_AudioStreamPlayer3D_constant_OUT_OF_RANGE_MIX:

.. _class_AudioStreamPlayer3D_constant_OUT_OF_RANGE_PAUSE:

enum **OutOfRangeMode**:

- **OUT_OF_RANGE_MIX** = **0** --- 将此音频混合，即使它超出范围。这会增加 CPU 使用率，但如果相机离开并进入 ``AudioStreamPlayer3D`` 的 :ref:`max_distance<class_AudioStreamPlayer3D_property_max_distance>` 半径，则保持声音在正确的位置播放。

- **OUT_OF_RANGE_PAUSE** = **1** --- 超出范围时暂停此音频。这会降低 CPU 使用率，但如果相机离开并进入 ``AudioStreamPlayer3D`` 的 :ref:`max_distance<class_AudioStreamPlayer3D_property_max_distance>` 半径，则会使声音重新开始。

----

.. _enum_AudioStreamPlayer3D_DopplerTracking:

.. _class_AudioStreamPlayer3D_constant_DOPPLER_TRACKING_DISABLED:

.. _class_AudioStreamPlayer3D_constant_DOPPLER_TRACKING_IDLE_STEP:

.. _class_AudioStreamPlayer3D_constant_DOPPLER_TRACKING_PHYSICS_STEP:

enum **DopplerTracking**:

- **DOPPLER_TRACKING_DISABLED** = **0** --- 禁用多普勒跟踪。

- **DOPPLER_TRACKING_IDLE_STEP** = **1** --- 在空闲的步骤中执行多普勒跟踪（每渲染一帧）。

- **DOPPLER_TRACKING_PHYSICS_STEP** = **2** --- 在物理步骤中执行多普勒跟踪（每个模拟的物理帧）。

属性说明
--------

.. _class_AudioStreamPlayer3D_property_area_mask:

- :ref:`int<class_int>` **area_mask**

+-----------+----------------------+
| *Default* | ``1``                |
+-----------+----------------------+
| *Setter*  | set_area_mask(value) |
+-----------+----------------------+
| *Getter*  | get_area_mask()      |
+-----------+----------------------+

这个声音的播放区域。

----

.. _class_AudioStreamPlayer3D_property_attenuation_filter_cutoff_hz:

- :ref:`float<class_float>` **attenuation_filter_cutoff_hz**

+-----------+-----------------------------------------+
| *Default* | ``5000.0``                              |
+-----------+-----------------------------------------+
| *Setter*  | set_attenuation_filter_cutoff_hz(value) |
+-----------+-----------------------------------------+
| *Getter*  | get_attenuation_filter_cutoff_hz()      |
+-----------+-----------------------------------------+

使用高于此频率的低通滤波器衰减音频，以 Hz 为单位。要完全禁用阻尼效果，请将其设置为 ``20500``\ ，因为该频率高于人类听力极限。

----

.. _class_AudioStreamPlayer3D_property_attenuation_filter_db:

- :ref:`float<class_float>` **attenuation_filter_db**

+-----------+----------------------------------+
| *Default* | ``-24.0``                        |
+-----------+----------------------------------+
| *Setter*  | set_attenuation_filter_db(value) |
+-----------+----------------------------------+
| *Getter*  | get_attenuation_filter_db()      |
+-----------+----------------------------------+

滤波器对响度的影响程度，以分贝为单位。

----

.. _class_AudioStreamPlayer3D_property_attenuation_model:

- :ref:`AttenuationModel<enum_AudioStreamPlayer3D_AttenuationModel>` **attenuation_model**

+-----------+------------------------------+
| *Default* | ``0``                        |
+-----------+------------------------------+
| *Setter*  | set_attenuation_model(value) |
+-----------+------------------------------+
| *Getter*  | get_attenuation_model()      |
+-----------+------------------------------+

决定音频是否应该得到更安静的距离线性，平方，对数，或不受影响的距离，有效地禁用衰减。

----

.. _class_AudioStreamPlayer3D_property_autoplay:

- :ref:`bool<class_bool>` **autoplay**

+-----------+-----------------------+
| *Default* | ``false``             |
+-----------+-----------------------+
| *Setter*  | set_autoplay(value)   |
+-----------+-----------------------+
| *Getter*  | is_autoplay_enabled() |
+-----------+-----------------------+

如果 ``true``\ ，则在将 AudioStreamPlayer3D 节点添加到场景树时播放音频。

----

.. _class_AudioStreamPlayer3D_property_bus:

- :ref:`String<class_String>` **bus**

+-----------+----------------+
| *Default* | ``"Master"``   |
+-----------+----------------+
| *Setter*  | set_bus(value) |
+-----------+----------------+
| *Getter*  | get_bus()      |
+-----------+----------------+

播放此音频的总线。

----

.. _class_AudioStreamPlayer3D_property_doppler_tracking:

- :ref:`DopplerTracking<enum_AudioStreamPlayer3D_DopplerTracking>` **doppler_tracking**

+-----------+-----------------------------+
| *Default* | ``0``                       |
+-----------+-----------------------------+
| *Setter*  | set_doppler_tracking(value) |
+-----------+-----------------------------+
| *Getter*  | get_doppler_tracking()      |
+-----------+-----------------------------+

决定 `多普勒效应 <https://en.wikipedia.org/wiki/Doppler_effect>`__ 应该在哪一步计算。

\ **注意：**\ 仅当当前 :ref:`Camera<class_Camera>` 的 :ref:`Camera.doppler_tracking<class_Camera_property_doppler_tracking>` 属性设置为 :ref:`Camera.DOPPLER_TRACKING_DISABLED<class_Camera_constant_DOPPLER_TRACKING_DISABLED>` 以外的值时有效。

----

.. _class_AudioStreamPlayer3D_property_emission_angle_degrees:

- :ref:`float<class_float>` **emission_angle_degrees**

+-----------+---------------------------+
| *Default* | ``45.0``                  |
+-----------+---------------------------+
| *Setter*  | set_emission_angle(value) |
+-----------+---------------------------+
| *Getter*  | get_emission_angle()      |
+-----------+---------------------------+

音频到达相机的角度，不受衰减。

----

.. _class_AudioStreamPlayer3D_property_emission_angle_enabled:

- :ref:`bool<class_bool>` **emission_angle_enabled**

+-----------+-----------------------------------+
| *Default* | ``false``                         |
+-----------+-----------------------------------+
| *Setter*  | set_emission_angle_enabled(value) |
+-----------+-----------------------------------+
| *Getter*  | is_emission_angle_enabled()       |
+-----------+-----------------------------------+

如果\ ``true``\ ，则应根据声音的方向对音频进行衰减。

----

.. _class_AudioStreamPlayer3D_property_emission_angle_filter_attenuation_db:

- :ref:`float<class_float>` **emission_angle_filter_attenuation_db**

+-----------+-------------------------------------------------+
| *Default* | ``-12.0``                                       |
+-----------+-------------------------------------------------+
| *Setter*  | set_emission_angle_filter_attenuation_db(value) |
+-----------+-------------------------------------------------+
| *Getter*  | get_emission_angle_filter_attenuation_db()      |
+-----------+-------------------------------------------------+

如果样机在 :ref:`emission_angle_degrees<class_AudioStreamPlayer3D_property_emission_angle_degrees>` 之外，并且 :ref:`emission_angle_enabled<class_AudioStreamPlayer3D_property_emission_angle_enabled>` 被设置为这个系数，则对音频进行减弱，单位是分贝。

----

.. _class_AudioStreamPlayer3D_property_max_db:

- :ref:`float<class_float>` **max_db**

+-----------+-------------------+
| *Default* | ``3.0``           |
+-----------+-------------------+
| *Setter*  | set_max_db(value) |
+-----------+-------------------+
| *Getter*  | get_max_db()      |
+-----------+-------------------+

设置声级的绝对最大值，以分贝为单位。

----

.. _class_AudioStreamPlayer3D_property_max_distance:

- :ref:`float<class_float>` **max_distance**

+-----------+-------------------------+
| *Default* | ``0.0``                 |
+-----------+-------------------------+
| *Setter*  | set_max_distance(value) |
+-----------+-------------------------+
| *Getter*  | get_max_distance()      |
+-----------+-------------------------+

设置\ :ref:`out_of_range_mode<class_AudioStreamPlayer3D_property_out_of_range_mode>`\ 生效的距离。设置为0时没有效果。

----

.. _class_AudioStreamPlayer3D_property_out_of_range_mode:

- :ref:`OutOfRangeMode<enum_AudioStreamPlayer3D_OutOfRangeMode>` **out_of_range_mode**

+-----------+------------------------------+
| *Default* | ``0``                        |
+-----------+------------------------------+
| *Setter*  | set_out_of_range_mode(value) |
+-----------+------------------------------+
| *Getter*  | get_out_of_range_mode()      |
+-----------+------------------------------+

决定当音源超出 :ref:`max_distance<class_AudioStreamPlayer3D_property_max_distance>` 范围时，是否应该暂停音频。

----

.. _class_AudioStreamPlayer3D_property_pitch_scale:

- :ref:`float<class_float>` **pitch_scale**

+-----------+------------------------+
| *Default* | ``1.0``                |
+-----------+------------------------+
| *Setter*  | set_pitch_scale(value) |
+-----------+------------------------+
| *Getter*  | get_pitch_scale()      |
+-----------+------------------------+

音频的音高和节奏，作为音频样本的采样率的倍数。

----

.. _class_AudioStreamPlayer3D_property_playing:

- :ref:`bool<class_bool>` **playing**

+-----------+--------------+
| *Default* | ``false``    |
+-----------+--------------+
| *Getter*  | is_playing() |
+-----------+--------------+

如果\ ``true``\ ，则播放音频。

----

.. _class_AudioStreamPlayer3D_property_stream:

- :ref:`AudioStream<class_AudioStream>` **stream**

+----------+-------------------+
| *Setter* | set_stream(value) |
+----------+-------------------+
| *Getter* | get_stream()      |
+----------+-------------------+

要播放的\ :ref:`AudioStream<class_AudioStream>`\ 资源。

----

.. _class_AudioStreamPlayer3D_property_stream_paused:

- :ref:`bool<class_bool>` **stream_paused**

+-----------+--------------------------+
| *Default* | ``false``                |
+-----------+--------------------------+
| *Setter*  | set_stream_paused(value) |
+-----------+--------------------------+
| *Getter*  | get_stream_paused()      |
+-----------+--------------------------+

如果\ ``true``\ ，则播放会暂停。你可以通过设置\ :ref:`stream_paused<class_AudioStreamPlayer3D_property_stream_paused>`\ 为\ ``false``\ 来恢复它。

----

.. _class_AudioStreamPlayer3D_property_unit_db:

- :ref:`float<class_float>` **unit_db**

+-----------+--------------------+
| *Default* | ``0.0``            |
+-----------+--------------------+
| *Setter*  | set_unit_db(value) |
+-----------+--------------------+
| *Getter*  | get_unit_db()      |
+-----------+--------------------+

不受阻尼影响的基本声级，单位为分贝。

----

.. _class_AudioStreamPlayer3D_property_unit_size:

- :ref:`float<class_float>` **unit_size**

+-----------+----------------------+
| *Default* | ``1.0``              |
+-----------+----------------------+
| *Setter*  | set_unit_size(value) |
+-----------+----------------------+
| *Getter*  | get_unit_size()      |
+-----------+----------------------+

衰减效果的系数。更高的值使声音在更远的距离可以听到。

方法说明
--------

.. _class_AudioStreamPlayer3D_method_get_playback_position:

- :ref:`float<class_float>` **get_playback_position** **(** **)**

返回\ :ref:`AudioStream<class_AudioStream>`\ 中的位置。

----

.. _class_AudioStreamPlayer3D_method_get_stream_playback:

- :ref:`AudioStreamPlayback<class_AudioStreamPlayback>` **get_stream_playback** **(** **)**

返回与该\ ``AudioStreamPlayer3D``\ 相关联的\ :ref:`AudioStreamPlayback<class_AudioStreamPlayback>`\ 对象。

----

.. _class_AudioStreamPlayer3D_method_play:

- void **play** **(** :ref:`float<class_float>` from_position=0.0 **)**

从给定的位置\ ``from_position``\ 播放音频，以秒为单位。

----

.. _class_AudioStreamPlayer3D_method_seek:

- void **seek** **(** :ref:`float<class_float>` to_position **)**

设置音频的播放位置，以秒为单位。

----

.. _class_AudioStreamPlayer3D_method_stop:

- void **stop** **(** **)**

停止音频。

.. |virtual| replace:: :abbr:`virtual (This method should typically be overridden by the user to have any effect.)`
.. |const| replace:: :abbr:`const (This method has no side effects. It doesn't modify any of the instance's member variables.)`
.. |vararg| replace:: :abbr:`vararg (This method accepts any number of arguments after the ones described here.)`
